/*!CK:4211251220!*//*1389133534,178158885*/

if (self.CavalryLogger) { CavalryLogger.start_js(["2S+6o"]); }

__d("DataGT",[],function(a,b,c,d,e,f){var g={setProperties:function(h,i){var j=h.getAttribute('data-gt')||"{}";try{j=JSON.parse(j);var l=false;for(var m in i){var n=i[m];if(n!==j[m]){j[m]=n;l=true;}}if(l)h.setAttribute('data-gt',JSON.stringify(j));}catch(k){}},setProperty:function(h,i,j){var k={};k[i]=j;g.setProperties(h,k);}};e.exports=g;});
__d("LitestandSidebarBookmarksDisplay",["Arbiter","CSS","DOM","Event","LitestandSidebarConfig","LitestandViewportHeight","csx","cx","emptyFunction"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('Event'),k=b('LitestandSidebarConfig'),l=b('LitestandViewportHeight'),m=b('csx'),n=b('cx'),o=b('emptyFunction'),p={},q={},r={},s={},t,u=false,v=false,w=Infinity,x,y=28,z=32,aa=40,ba=.75,ca=60,da=42,ea=48,fa=51+da;function ga(){if(k.blended_sidebar)return aa;var ja=l.getSize();if(ja===l.SMALL){return y;}else return z;}function ha(){var ja=document.documentElement.clientHeight,ka=(k.right_divebar&&h.hasClass(document.documentElement,'sidebarMode'))||k.blended_sidebar,la;if(!ka){ja-=v?ca:0;la=.5;var ma=k.ratio_config;if(t){if(ja>ma.min_pixel_40_60){la=.4;}else if(ja>ma.min_pixel_45_55)la=.45;}else la=ma.chat_disabled_ratio||ba;}else la=1;var na=ga(),oa;if(k.blended_sidebar){oa=na+ea;}else oa=fa+na-z;var pa=ja*la-oa;return pa-pa%na;}var ia={getVisibleItems:function(){return p;},getHiddenItems:function(){return q;},getTopLevelItems:function(){return r;},setBookmarksOpen:function(ja){u=ja;},getFavorites:function(){return s;},setFavorite:function(ja){s[ja.getAttribute('data-id')]=ja;},display:function(ja,ka,la){ia.display=o;t=la;x=function(){var oa=i.scry(ka,"._4g5p");w=oa.length;var pa=ia.getHeight(),qa=ga(),ra=Math.min(oa.length,Math.floor(pa/qa));if(!u)ja.style.height=pa+'px';p={};q={};r={};for(var sa=0,ta=oa.length;sa<ta;++sa){var ua=oa[sa],va=ua.getAttribute('data-id'),wa=h.hasClass(ua,"_52s3");if(sa<ra)r[va]=ua;if((sa<ra)||wa){h.show(ua);p[va]=ua;}else{h.hide(ua);q[va]=ua;}}g.inform('Sidebar/BookmarksHeightChange');};var ma=function(oa){t=oa;x();},na=function(oa){v=oa;x();};j.listen(window,'resize',x);g.subscribe(['ViewportSizeChange','LitestandCollapsedList/show','LitestandCollapsedList/hide'],x);g.subscribe('chat-visibility/go-online',ma.bind(null,true));g.subscribe('chat-visibility/go-offline',ma.bind(null,false));g.subscribe('LitestandTicker/Visible',na.bind(null,true));g.subscribe('LitestandTicker/notVisible',na.bind(null,false));x();},getHeight:function(){var ja=w;if(k.blended_sidebar&&!k.blended_full_height)ja=Math.min(ja,k.max_blended_bm_items);return Math.min(ha(),ja*ga());},getFullHeight:function(){return fa+ia.getHeight();},update:function(){x();}};e.exports=ia;});
__d("LitestandSidebarCountUpdater",["JSXDOM","Arbiter","ChannelConstants","CSS","DOM","Event","LitestandMessages","LitestandNewsfeedCountUpdater","LitestandSidebarBookmarkConfig","MessagingEvents","NavigationMessage","Parent","copyProperties","csx","cx"],function(a,b,c,d,e,f){var g=b('JSXDOM'),h=b('Arbiter'),i=b('ChannelConstants'),j=b('CSS'),k=b('DOM'),l=b('Event'),m=b('LitestandMessages'),n=b('LitestandNewsfeedCountUpdater'),o=b('LitestandSidebarBookmarkConfig'),p=b('MessagingEvents'),q=b('NavigationMessage'),r=b('Parent'),s=b('copyProperties'),t=b('csx'),u=b('cx'),v=9,w='app_217974574879787',x='app_4748854339',y={group:true};function z(aa){this._root=aa;h.subscribe(i.getArbiterType('nav_update_counts'),this._updateBookmarkCounts.bind(this));h.subscribe(q.NAVIGATION_COUNT_UPDATE,this._updateItemCountFromArbiter.bind(this));p.subscribe('count/unread',this._updateMsgCounts.bind(this));l.listen(aa,'click',function(event){var ba=r.byClass(event.getTarget(),"_4g5p");if(!ba||!ba.getAttribute('data-gt'))return;var ca=JSON.parse(ba.getAttribute('data-gt')).item_type;if(y[ca]){var da=k.scry(ba,"._4g5z")[0];da&&k.remove(da);}});if(o.badge_nf){n.init();h.subscribe(m.UPDATE_HOME_COUNT,function(ba,ca){this._initBookmarkItems();var da=this._bookmarkItems[x];if(!da)return;this._setCount(da[0],ca.onHome?0:ca.count);}.bind(this));this._unhideNewsfeedCount();}}z.init=function(aa){new z(aa);};s(z.prototype,{_initStyles:function(){this._itemCountClass="._4g5z";this._itemLinkClass="._4g5p";},_initBookmarkItems:function(){if(this._bookmarkItems)return;this._initStyles();this._bookmarkItems={};var aa=k.scry(this._root,this._itemLinkClass),ba,ca;aa.forEach(function(da){ba=JSON.parse(da.getAttribute('data-gt'));if(ba){ca=[ba.item_type+'_'+ba.bmid];if(this._bookmarkItems[ca]){this._bookmarkItems[ca].push(da);}else this._bookmarkItems[ca]=[da];}}.bind(this));},_updateBookmarkCounts:function(aa,ba){this._initBookmarkItems();if(aa===m.NEWSFEED_LOAD)ba={obj:{items:[{key:x,count:0}]}};ba=ba.obj;if(ba&&ba.items)ba.items.forEach(this._updateItemCounts.bind(this));},_updateItemCountFromArbiter:function(aa,ba){this._initBookmarkItems();this._updateItemCounts(ba);},_updateMsgCounts:function(aa,ba){this._initBookmarkItems();this._updateItemCounts({key:w,count:ba});},_updateItemCounts:function(aa){var ba=this._bookmarkItems[aa.key];if(!ba)return;ba.forEach(function(ca){if(typeof aa.count!=='undefined'){this._setCount(ca,aa.count);}else if(typeof aa.increment!=='undefined'){var da=parseInt(JSON.parse(ca.getAttribute('data-gt')).count,10)+aa.increment;this._setCount(ca,da);}}.bind(this));},_setCount:function(aa,ba){var ca=JSON.parse(aa.getAttribute('data-gt')),da=ca.count;if(da==ba)return;ca.count=ba;aa.setAttribute('data-gt',JSON.stringify(ca));if(da>v&&ba>v)return;var ea=k.scry(aa,this._itemCountClass);if(ea)ea=ea[0];if(ba===0){this._removeCounts(aa,ea);return;}this._updateNewCount(aa,ba,da,ea);},_updateNewCount:function(aa,ba,ca,da){var ea;if(ba>v){ea=true;ba=v+'+';}if(da){j.conditionClass(da,"_502g",ea);k.setContent(da,ba);}else this._addNewCount(aa,ba,ea);},_removeCounts:function(aa,ba){ba&&k.remove(r.byClass(ba,"_4g5z"));},_addNewCount:function(aa,ba,ca){var da="_4g5z";if(ca)da="_4g5z _502g";k.prependContent(k.find(aa,"._4vsz"),g.div({className:da},ba));},_unhideNewsfeedCount:function(){this._initBookmarkItems();var aa=this._bookmarkItems[x];if(!aa)return;var ba=k.scry(aa[0],"._4g5z")[0];if(ba)j.show(ba);}});e.exports=z;});
__d("LitestandSidebarImpressionsLogger",["AsyncRequest","CSS","DOM","DOMDimensions","LitestandSidebar","LitestandSidebarBookmarkLevels","LitestandSidebarBookmarksDisplay","csx","cx"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('DOMDimensions'),k=b('LitestandSidebar'),l=b('LitestandSidebarBookmarkLevels'),m=b('LitestandSidebarBookmarksDisplay'),n=b('csx'),o=b('cx'),p='/ajax/litestand/sidebar/impressions',q={},r={logBookmarkImpressions:function(s,t){var u=i.getID(s);if(q[u])return;q[u]=true;var v=i.scry(s,"._4g5p"),w=[];for(var x=0,y=v.length;x<y;x++){var z=v[x];if(!h.shown(z))continue;var aa=h.hasClass(z.parentNode,"_53s4");if((t===l.ONE_CLICK&&!aa)||(t===l.TWO_CLICKS&&aa))w.push(z.getAttribute('data-gt'));}g.post(p,{bookmark_gts:w,level:t});},logSidebarImpression:function(){var s=m.getVisibleItems(),t=[];for(var u in s)t.push(s[u].getAttribute('data-gt'));var v=j.getViewportDimensions();g.post(p,{bookmark_gts:t,is_expanded:k.isExpanded(),level:l.TOP_LEVEL,screen_height:window.screen.height,screen_width:window.screen.width,viewport_height:v.height,viewport_width:v.width});}};e.exports=r;});
__d("LitestandSidebarBookmarks",["Animation","Arbiter","AsyncSignal","AvailableList","AvailableListConstants","Bootloader","ChatSidebar","ChatVisibility","CSS","DataGT","DOM","Ease","Event","Focus","LitestandLinkHider","LitestandSidebarBookmarkLevels","LitestandSidebarBookmarksDisplay","LitestandSidebarCountUpdater","LitestandSidebarConfig","LitestandSidebarImpressionsLogger","Parent","ScrollableArea","Style","UIPagelet","Vector","$","createArrayFrom","csx","cx","emptyFunction","isEmpty","requestAnimationFrame","setTimeoutAcrossTransitions","throttle","tx"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('AsyncSignal'),j=b('AvailableList'),k=b('AvailableListConstants'),l=b('Bootloader'),m=b('ChatSidebar'),n=b('ChatVisibility'),o=b('CSS'),p=b('DataGT'),q=b('DOM'),r=b('Ease'),s=b('Event'),t=b('Focus'),u=b('LitestandLinkHider'),v=b('LitestandSidebarBookmarkLevels'),w=b('LitestandSidebarBookmarksDisplay'),x=b('LitestandSidebarCountUpdater'),y=b('LitestandSidebarConfig'),z=b('LitestandSidebarImpressionsLogger'),aa=b('Parent'),ba=b('ScrollableArea'),ca=b('Style'),da=b('UIPagelet'),ea=b('Vector'),fa=b('$'),ga=b('createArrayFrom'),ha=b('csx'),ia=b('cx'),ja=b('emptyFunction'),ka=b('isEmpty'),la=b('requestAnimationFrame'),ma=b('setTimeoutAcrossTransitions'),na=b('throttle'),oa=b('tx'),pa,qa,ra,sa,ta,ua=false,va,wa,xa,ya,za,ab,bb=[],cb,db,eb=600;function fb(){cb=cb||ba.getInstance(sa);return cb;}function gb(){if(!xa)return;var nb=n.isOnline();o.conditionClass(va,"_51lw",!nb);var ob;if(nb){ob=oa._("Chat ({count})",{count:j.getOnlineCount()});}else ob="Chat";q.setContent(q.find(va,"._4-td"),ob);}function hb(){if(!y.has_chat_enabled)return;var nb=false;if(xa)nb=true;bb.forEach(function(ob){if(o.shown(ob.getRoot()))nb=true;});if(!ka(w.getHiddenItems()))nb=true;o.conditionShow(va,nb);m.resize();}function ib(nb){xa=nb;gb();o.conditionClass(va,"_4-tb",nb);}function jb(nb){if(nb&&ab)return;o.conditionShow(q.find(va,"._505r"),nb);o.conditionShow(q.find(va,"._4-pu"),!nb);}function kb(nb){var ob=nb?'collapsed':'expanded';new i('/common/ods_endpoint.php',{k:'home.litestand.expansion.'+ob}).send();}function lb(nb){var ob=ea.getViewportDimensions();p.setProperties(qa,{sidebar_expansion:nb?'collapsed':'expanded',viewport_height:ob.y,viewport_width:ob.x});}var mb={init:function(nb,ob,pb,qb,rb,sb){qa=nb;pa=aa.byClass(nb,'fbChatSidebar')||aa.byClass(nb,"_5ap0");ra=ob;sa=pb;ta=qb;va=rb;var tb=o.hasClass(document.documentElement,"_4kdq");lb(tb);kb(tb);h.subscribe(['LitestandSidebar/collapse','LitestandSidebar/expand'],function(yb){var zb=(yb==='LitestandSidebar/collapse')?'collapsed':'expanded';p.setProperty(qa,'sidebar_expansion',zb);});var ub=s.listen(nb,'mouseenter',function(event){mb.loadAll();ub.remove();ub=null;});u.hideLinks(nb);s.listen(rb,'click',function(event){if(ab){mb.close(true);}else{db=true;mb.open();}event.stop();});if(sb){var vb=sb.getStickyContainer();wa=vb.update.bind(vb);var wb=vb.forceUpdate.bind(vb);s.listen(window,'resize',na.acrossTransitions(function(){wa();wb();hb();var yb=ea.getViewportDimensions();p.setProperties(qa,{viewport_height:yb.y,viewport_width:yb.x});}));h.subscribe('LitestandTicker/notVisible',wb);sb.subscribe('extract_change',function(yb,zb){ib(zb.extracted);});m.subscribe('sidebar/chatRendered',function(){var yb=q.find(pa,"._4-tc");o.show(yb);wa();o.removeClass(yb,"_4-tc");m.resize();});}else wa=ja;h.subscribe('Sidebar/BookmarksHeightChange',function(){bb.forEach(function(yb){yb.updateShownInSection();});hb();});h.subscribe(k.ON_AVAILABILITY_CHANGED,gb);s.listen(fa('navHome'),'click',mb.close);s.listen(fa('pageLogo'),'click',mb.close);s.listen(nb,'click',function(event){if(event.isDefaultRequested())return;if(ua){event.kill();return;}var yb=event.getTarget(),zb=aa.byClass(yb,"_4g5p");if(zb){mb.closeIfStillVisible(zb);ma(function(){var ac=document.body.getAttribute('tabindex')!==null;ac||document.body.setAttribute('tabindex',0);document.body.focus();ac||document.body.removeAttribute('tabindex');},0);}});h.subscribe('sidebar/typeahead/preActive',function(){mb.close(null,true);});new x(nb);hb();if(y.has_favorites_editing){var xb=q.find(nb,"._52s4");s.listen(xb,'click',function(){l.loadModules(["LitestandSidebarBookmarksEditing"],function(yb){yb.toggle(nb,xb,qb);});});h.subscribe('LitestandSidebarBookmarksEditing/begin',function(){ua=true;});h.subscribe('LitestandSidebarBookmarksEditing/end',function(){ua=false;});}z.logSidebarImpression();if(!y.has_chat_enabled){db=true;mb.loadAll();}},loadAll:function(){db&&jb(true);if(ya)return;ya=true;da.loadFromEndpoint('SidebarNavigationPagelet',q.getID(sa),null,{crossPage:true,displayCallback:function(nb){za=true;nb();jb(false);}});},open:function(){h.inform('LitestandSidebarBookmarks/open');if(!za){mb.loadAll();return;}ab=true;w.setBookmarksOpen(true);o.addClass(pa,"_4w59");o.addClass(pa,"_52s6");z.logBookmarkImpressions(sa,v.ONE_CLICK);var nb=false,ob=ra.offsetHeight;ca.set(ra,'height','auto');new g(ra).from('height',ob).to('height',ra.offsetHeight).duration(eb).ease(r.easeOutExpo).ondone(function(){ca.set(ra,'height','auto');nb=true;}).go();var pb=function(){wa();nb||ma(la.bind(null,pb),100);};ma(la.bind(null,pb),100);p.setProperty(va,'masher','less');var qb=q.find(pa,"._521g");t.setWithoutOutline(qb);},closeIfStillVisible:function(nb){var ob=nb.getAttribute('data-id'),pb=w.getTopLevelItems();if(pb[ob])mb.close();},close:function(nb,ob){if(!ab||!y.has_chat_enabled)return;ab=false;o.removeClass(pa,"_4w59");o.removeClass(pa,"_52s6");w.setBookmarksOpen(false);var pb=w.getHeight(),qb=false;new g(ra).from('height',ra.offsetHeight).to('height',pb).duration(ob?0:eb).ease(r.easeOutExpo).ondone(function(){qb=true;h.inform('LitestandSidebarBookmarks/close');nb&&h.inform('LitestandSidebarBookmarks/clickToCollapse');}).go();if(!ob)fb().setScrollTop(0,true,{duration:eb,ease:r.easeOutExpo});var rb=function(){wa();qb||ma(la.bind(null,rb),100);};ma(la.bind(null,rb),100);p.setProperty(va,'masher','more');},registerAndDisplaySections:function(nb){nb.forEach(function(ob){ob.subscribe('after_transition',wa);h.subscribe('LitestandSidebarBookmarks/close',ob.collapse.bind(ob));bb.push(ob);ob.updateShownInSection();});db&&mb.open();hb();},registerAllFavorites:function(nb){ga(nb.childNodes).forEach(function(ob){var pb=ob.getAttribute('data-id'),qb=w.getVisibleItems(),rb=w.getHiddenItems();if(!qb[pb]&&!rb[pb]){if(!ab)o.hide(ob);q.appendContent(ta,ob);}});w.update();},registerFlyoutItem:function(nb,ob){h.subscribe('LitestandSidebar/collapse',mb.close);var pb;s.listen(nb,'click',function(event){l.loadModules(["LitestandSidebarContextualFlyout"],function(qb){if(pb){pb.toggle();return;}pb=new qb({context:nb},ob);pb.show();u.hideLinks(pb.getContentRoot());da.loadFromEndpoint('SidebarBookmarksFlyoutPagelet',pb.getContentRoot(),null,{crossPage:true});});event.kill();});}};e.exports=mb;});
__d("LitestandSidebarCollapsedListController",["Arbiter","CSS","DOM","DOMDimensions","Event","LitestandSidebarBookmarksDisplay","csx","throttle"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('DOMDimensions'),k=b('Event'),l=b('LitestandSidebarBookmarksDisplay'),m=b('csx'),n=b('throttle'),o=15,p;function q(){var s=j.getViewportWithoutScrollbarDimensions().height,t=l.getFullHeight(),u=p.getItemHeight(),v=Math.floor((s-t-o)/u);p.setNumTopFriends(v);}var r={init:function(s){p=s;i.scry(document.body,"._4i9v").forEach(i.remove);g.subscribe('ViewportSizeChange',q);g.subscribe('Sidebar/BookmarksHeightChange',q);k.listen(window,'resize',n(q));if(!h.hasClass(document.documentElement,'sidebarMode'))r.show();g.subscribe('sidebar/show',r.hide);g.subscribe('sidebar/hide',r.show);var t=i.find(document.body,"._5ap3");i.remove(t);},show:function(){p.show();q();g.inform('LitestandCollapsedList/show');},hide:function(){p.hide();g.inform('LitestandCollapsedList/hide');}};e.exports=r;});